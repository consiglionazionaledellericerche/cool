<div id="tasks-{{$index}}" ng-show="tasks" ng-repeat="(type, tasksForType) in tasks" class="margin-bottom-helper tasks">
  <h4>{{type}}</h4>
  <div class="row" ng-repeat="task in tasksForType">
    <div class="col-md-8">
      <strong>{{task.properties.wfcnr_wfCounterId}}</strong>
      <span ng-bind-html="task.properties.bpm_priority | priority"></span>
      <br>
      <b>{{task.description}} ({{task.title}})</b>
      <br>
      <div ng-hide="completed">
        avviato da {{task.workflowInstance.initiator.firstName}} {{task.workflowInstance.initiator.lastName}}
      il {{task.workflowInstance.startDate | date}}
        <span ng-bind-html="task.properties.bpm_dueDate | dueDate"></span>
      </div>
      <div ng-show="completed">
        assegnato il {{task.properties.bpm_startDate | date}}, completato con scelta <strong>{{task.outcome}}</strong> il {{task.properties.bpm_completionDate | date}}
        <br>
        commento rilasciato: {{task.properties.bpm_comment}}
      </div>

    </div>
    <div class="col-md-4 text-right" ng-show="completed">
    </div>
    <div class="col-md-4 text-right" ng-show="!completed">
      <button class="btn btn-info btn-sm" ng-show="task.isPooled && (pooled[task.id] !== undefined ? pooled[task.id] === true : task.owner)" ng-click="takeTask(task.id)">restituisci al pool</button>

      <button class="btn btn-primary btn-sm" ng-show="task.isPooled && (pooled[task.id] !== undefined ? pooled[task.id] === false : !task.owner)" ng-click="takeTask(task.id, true)">prendi in carico</button>

      <a class="btn btn-default btn-sm" ng-href="#/task/{{task.id}}"><span class="glyphicon glyphicon-cog"></span> azioni</a>
      <a class="btn btn-default btn-sm" ng-click="modalTaskDiagram(task)">diagramma</a>

    </div>
  </div>
</div>

<span ng-hide="tasks">nessun task assegnato</span>