<div class="row">
  <div class="col-md-12">
    <h3>{{task.properties.wfcnr_wfCounterId}}</h3>
  </div>
</div>

<stepper step="step.step" steps="steps" top="true" hide-stepper="hidden"></stepper>

<!-- step 0 -->
<div class="row" ng-show="step.key === 'start'">
  <div class="col-md-4">
    <h4>Titolo: {{task.properties.bpm_description}}</h4>
    <br>
    <h4>Fase: {{task.title}}</h4>
    <h4 ng-show="task.properties.bpm_dueDate">Scadenza: {{task.properties.bpm_dueDate |  date}}
    <h4 ng-show="task.properties.bpm_comment">Commento precedente: {{task.properties.bpm_comment}}

    <br>
    <br>
    <div ng-show="main">
      <strong>Documenti principali</strong>
      <ul class="list-unstyled">
        <li ng-repeat="document in main">
          <mimetype type="{{document['cmis:contentStreamMimeType']}}" name="{{document['cmis:objectId']}}"></mimetype>

          <a ng-href="{{urlContent}}?nodeRef={{document['cmis:objectId']}}">{{document['cmis:name']}}</a> rev. {{document['cmis:versionLabel']}}
        </li>
      </ul>
    </div>

    <div ng-show="aux">
      <strong>Allegati</strong>
      <ul class="list-unstyled">
        <li ng-repeat="document in aux">
          {{document['cmis:name']}}
        </li>
      </ul>
    </div>

    <br>


    <div ng-hide="choice">
      <h4>Azioni</h4>
      <button class="btn btn-default btn-action" ng-disabled="choice" ng-class="{'btn-primary': defaultTransition === transition.key, 'btn-success': choice === transition.key}" ng-repeat="transition in transitions" ng-click="endTask(transition.key)"><span class="glyphicon glyphicon-cog"></span> {{transition.key}}</button>
    </div>



  </div>
  <div class="col-md-8 text-right">
    <!-- workflow diagram -->
    <img ng-src="{{urlProxy}}service/api/workflow-instances/{{task.workflowInstance.id}}/diagram" title="{{task.title}}" />
  </div>
</div>



<!-- caricamentod documenti principali -->


<div class="row" ng-show="step.key == 'docMain'">
  <form id="dropzone-core" drop-area class="dropzone" document-type="Principale" ng-show="addMainDocument"></form>
</div>

<div class="row" ng-show="step.key === 'docAux'">
  <form id="dropzone-aux" drop-area class="dropzone dropzone-aux" document-type="Allegato" ng-show="addAuxDocument"></form>
</div>

<div class="row" ng-show="step.key === 'metadata'">
  <bulkinfo form-settings="bulkInfoSettings" data="bulkinfoData"></bulkinfo>
  <p class="text-danger">{{error}}</p>
</div>

<div class="row" ng-show="step.key === 'summary'">
  compito {{success.key}} completato con successo.
  <strong>{{success.message}}</strong>
</div>


<stepper step="step.step" steps="steps" change-step="changeStep" hide-stepper="hidden"></stepper>

<br><br>
<pre ng-show="development">
  {{task | json}}
</pre>


