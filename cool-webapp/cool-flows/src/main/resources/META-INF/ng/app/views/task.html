<div class="row">
  <div class="col-md-12">
    <h3>{{task.properties.wfcnr_wfCounterId}}</h3>
  </div>
</div>

<stepper step="step.step" steps="steps" top="true" hide-stepper="hidden"></stepper>

<!-- step 0 -->
<div class="row" ng-show="step.key === 'start'">
  <div class="col-md-4">
    <h4><strong>Titolo</strong>: {{task.properties.bpm_description}}</h4>
    <h4><strong>Fase</strong>: {{task.title}}</h4>
    <h4 ng-show="task.properties.bpm_dueDate"><strong>Scadenza</strong>: {{task.properties.bpm_dueDate |  date}}</h4>
    <h4 ng-show="task.properties.bpm_comment"><strong>Commento precedente</strong>: {{task.properties.bpm_comment}}</h4>

    <br>

    <attachments aux="aux" main="main" updated="updated" upload-content="uploadContent"></attachments>

    <br>

    <div ng-hide="choice">
      <h4><strong>Azioni</strong></h4>
      <button class="btn btn-default btn-action" ng-disabled="choice" ng-class="{'btn-primary': defaultTransition === transition.key, 'btn-success': choice === transition.key}" ng-repeat="transition in transitions" ng-click="action(transition.key)"><span class="glyphicon glyphicon-cog"></span> {{transition.key}}</button>
    </div>

  </div>
  <div class="col-md-8 text-right">
    <!-- workflow diagram -->
    <img ng-src="{{diagramUrl}}" title="{{task.title}}" />
  </div>

  <br />

  <div class="text-center">
    <a class="btn btn-danger" ng-href="#/main">esci <span class="glyphicon glyphicon-remove"></span></a>
  </div>

</div>



<!-- caricamentod documenti principali -->


<div class="row" ng-show="step.key == 'docMain'">
  <form id="dropzone-core" drop-area class="dropzone" document-type="Principale"></form>
</div>

<div class="row" ng-show="step.key === 'docAux'">
  <form id="dropzone-aux" drop-area class="dropzone dropzone-aux" document-type="Allegato"></form>
</div>

<div class="row" ng-show="step.key === 'metadata'">
  <bulkinfo form-settings="bulkInfoSettings" data="bulkinfoData"></bulkinfo>
  <p class="text-danger">{{error}}</p>
</div>

<div class="row" ng-show="step.key === 'summary'">
  <p class="text-success">compito <strong>{{success.key}}</strong> completato con successo.</p>
  <strong ng-show="development">{{success.message}}</strong>

  <strong>title</strong>: {{task.title}}
  <strong>commento</strong>: {{task.properties.bpm_comment}}
  <strong>percentuale avanzamento</strong>: {{task.properties.bpm_percentComplete}}
  <strong>data di completamento</strong>: {{task.properties.bpm_completionDate | date}}


  <attachments aux="aux" main="main"></attachments>


</div>


<stepper step="step.step" steps="steps" change-step="changeStep" hide-stepper="hidden"></stepper>

<br><br>
<pre ng-show="development">
  {{task | json}}
</pre>


